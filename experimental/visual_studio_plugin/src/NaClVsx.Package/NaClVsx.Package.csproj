<Project DefaultTargets="Build" xmlns="http://schemas.microsoft.com/developer/msbuild/2003" ToolsVersion="3.5">
  <PropertyGroup>
    <Configuration Condition=" '$(Configuration)' == '' ">Debug</Configuration>
    <Platform Condition=" '$(Platform)' == '' ">AnyCPU</Platform>
    <ProductVersion>9.0.30729</ProductVersion>
    <SchemaVersion>2.0</SchemaVersion>
    <OutputType>Library</OutputType>
    <AppDesignerFolder>Properties</AppDesignerFolder>
    <RootNamespace>Google.NaClVsx</RootNamespace>
    <AssemblyName>NaClVsx.Package</AssemblyName>
    <SignAssembly>False</SignAssembly>
    <AssemblyOriginatorKeyFile>Key.snk</AssemblyOriginatorKeyFile>
    <TargetFrameworkVersion>v3.5</TargetFrameworkVersion>
    <ProjectGuid>{20C5110D-0897-4B1C-9193-26D6F6E088AE}</ProjectGuid>
  </PropertyGroup>
  <PropertyGroup Condition=" '$(Configuration)|$(Platform)' == 'Debug|AnyCPU' ">
    <DebugSymbols>true</DebugSymbols>
    <DebugType>full</DebugType>
    <Optimize>false</Optimize>
    <OutputPath>bin\Debug\</OutputPath>
    <DefineConstants>DEBUG;TRACE</DefineConstants>
    <ErrorReport>prompt</ErrorReport>
    <WarningLevel>4</WarningLevel>
    <UseVSHostingProcess>true</UseVSHostingProcess>
    <TreatWarningsAsErrors>true</TreatWarningsAsErrors>
  </PropertyGroup>
  <PropertyGroup Condition=" '$(Configuration)|$(Platform)' == 'Release|AnyCPU' ">
    <DebugType>pdbonly</DebugType>
    <Optimize>true</Optimize>
    <OutputPath>bin\Release\</OutputPath>
    <DefineConstants>TRACE</DefineConstants>
    <ErrorReport>prompt</ErrorReport>
    <WarningLevel>4</WarningLevel>
    <RunCodeAnalysis>true</RunCodeAnalysis>
  </PropertyGroup>
  <ItemGroup>
    <Reference Include="Microsoft.Build.Engine" />
    <Reference Include="Microsoft.VisualStudio.Debugger.InteropA, Version=9.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" />
    <Reference Include="Microsoft.VisualStudio.OLE.Interop" />
    <Reference Include="Microsoft.VisualStudio.Shell.9.0, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a, processorArchitecture=MSIL">
      <SpecificVersion>False</SpecificVersion>
      <HintPath>..\..\..\..\Windows\assembly\GAC_MSIL\Microsoft.VisualStudio.Shell.9.0\2.0.0.0__b03f5f7f11d50a3a\Microsoft.VisualStudio.Shell.9.0.dll</HintPath>
    </Reference>
    <Reference Include="Microsoft.VisualStudio.Shell.Interop" />
    <Reference Include="Microsoft.VisualStudio.Shell.Interop.8.0" />
    <Reference Include="Microsoft.VisualStudio.Shell.Interop.9.0, Version=9.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a">
      <SpecificVersion>False</SpecificVersion>
      <HintPath>..\..\..\..\Windows\assembly\GAC\Microsoft.VisualStudio.Shell.Interop.9.0\9.0.0.0__b03f5f7f11d50a3a\Microsoft.VisualStudio.Shell.Interop.9.0.dll</HintPath>
    </Reference>
    <Reference Include="Microsoft.VisualStudio.TextManager.Interop" />
    <Reference Include="System" />
    <Reference Include="System.Configuration.Install" />
    <Reference Include="System.Core, Version=3.5.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089, processorArchitecture=MSIL">
      <RequiredTargetFramework>3.5</RequiredTargetFramework>
    </Reference>
    <Reference Include="System.Data" />
    <Reference Include="System.Data.DataSetExtensions">
      <RequiredTargetFramework>3.5</RequiredTargetFramework>
    </Reference>
    <Reference Include="System.Data.Linq">
      <RequiredTargetFramework>3.5</RequiredTargetFramework>
    </Reference>
    <Reference Include="System.Design" />
    <Reference Include="System.Drawing" />
    <Reference Include="System.Management" />
    <Reference Include="System.Windows.Forms" />
    <Reference Include="System.Xml" />
    <Reference Include="System.Xml.Linq">
      <RequiredTargetFramework>3.5</RequiredTargetFramework>
    </Reference>
  </ItemGroup>
  <ItemGroup>
    <Compile Include="DebugSupport\BreakpointInfo.cs" />
    <Compile Include="DebugSupport\DWARF\DebugInfoEntry.cs" />
    <Compile Include="DebugSupport\NaClPort.cs" />
    <Compile Include="DebugSupport\NaClPortSupplier.cs" />
    <Compile Include="DebugSupport\NaClDebugProcess.cs" />
    <Compile Include="Installation\DebugEngineRegistrationAttribute.cs" />
    <Compile Include="DebugSupport\DWARF\ExtensionMethods.cs" />
    <Compile Include="DebugSupport\DWARF\DwarfReaderImpl.cs" />
    <Compile Include="DebugSupport\DWARF\SymbolDatabase.cs" />
    <Compile Include="DebugSupport\DWARF\VirtualMachineInputs.cs" />
    <Compile Include="DebugSupport\NaClDebugger.cs" />
    <Compile Include="DebugSupport\Engine.cs" />
    <Compile Include="DebugSupport\ProgramNode.cs" />
    <Compile Include="DebugSupport\NaClSymbolProvider.cs" />
    <Compile Include="DebugSupport\Thread.cs" />
    <Compile Include="Installation\PortSupplierRegistrationAttribute.cs" />
    <Compile Include="NaClGuids.cs" />
    <Compile Include="Installation\InstallHelp.cs">
      <SubType>Component</SubType>
    </Compile>
    <Compile Include="Installation\InstallHelp.Designer.cs">
      <DependentUpon>InstallHelp.cs</DependentUpon>
    </Compile>
    <Compile Include="Installation\ProgressForm.cs">
      <SubType>Form</SubType>
    </Compile>
    <Compile Include="Installation\ProgressForm.Designer.cs">
      <DependentUpon>ProgressForm.cs</DependentUpon>
    </Compile>
    <Compile Include="Installation\ProvideMSBuildTargetAttribute.cs" />
    <Compile Include="NaClPackage.cs" />
    <Compile Include="DebugSupport\ProgramProvider.cs" />
    <Compile Include="ProjectSupport\DebugProperties.cs" />
    <Compile Include="ProjectSupport\GeneralProperties.cs" />
    <Compile Include="ProjectSupport\NaClConfigProvider.cs" />
    <Compile Include="ProjectSupport\NaClProjectConfig.cs" />
    <Compile Include="ProjectSupport\NaClProjectFactory.cs" />
    <Compile Include="ProjectSupport\NaClProjectNode.cs" />
    <Compile Include="GlobalSuppressions.cs" />
    <Compile Include="ProjectSupport\AutoSettingsPage.cs" />
    <Compile Include="Properties\AssemblyInfo.cs" />
  </ItemGroup>
  <ItemGroup>
    <EmbeddedResource Include="Installation\InstallHelp.resx">
      <DependentUpon>InstallHelp.cs</DependentUpon>
      <SubType>Designer</SubType>
    </EmbeddedResource>
    <EmbeddedResource Include="Installation\ProgressForm.resx">
      <DependentUpon>ProgressForm.cs</DependentUpon>
      <SubType>Designer</SubType>
    </EmbeddedResource>
    <EmbeddedResource Include="NaCl.resx">
      <SubType>Designer</SubType>
    </EmbeddedResource>
    <EmbeddedResource Include="VSPackageResources.resx">
      <MergeWithCTO>true</MergeWithCTO>
      <SubType>Designer</SubType>
    </EmbeddedResource>
  </ItemGroup>
  <ItemGroup>
    <Content Include="Resources\Google-32.png" />
    <Content Include="Resources\Package.ico" />
    <ZipItem Include="Templates\ProjectItems\NaClClass\Class.cpp" />
    <ZipItem Include="Templates\ProjectItems\NaClClass\NaCl.vstemplate" />
    <ZipItem Include="Templates\ProjectItems\NaClClass\NaclIcon.ico" />
    <ZipItem Include="Templates\ProjectItems\NaClFile\NaclIcon.ico" />
    <ZipItem Include="Templates\ProjectItems\NaClFile\NaCl.vstemplate" />
    <ZipItem Include="Templates\ProjectItems\NaClFile\file.c" />
    <ZipItem Include="Templates\ProjectItems\NaClClass\Class.h" />
    <ZipItem Include="Templates\ProjectItems\HtmlFile\NaCl.vstemplate" />
    <ZipItem Include="Templates\ProjectItems\HtmlFile\HtmlIcon.ico" />
    <ZipItem Include="Templates\ProjectItems\HtmlFile\file.html">
      <CopyToOutputDirectory>Always</CopyToOutputDirectory>
    </ZipItem>
    <ZipItem Include="Templates\ProjectItems\NmfFile\file.nmf" />
    <ZipItem Include="Templates\ProjectItems\NmfFile\NmfIcon.ico" />
    <ZipItem Include="Templates\ProjectItems\NmfFile\NaCl.vstemplate" />
    <ZipItem Include="Templates\ProjectItems\JavascriptFile\NaCl.vstemplate" />
    <ZipItem Include="Templates\ProjectItems\JavascriptFile\file.js">
      <CopyToOutputDirectory>Always</CopyToOutputDirectory>
    </ZipItem>
    <ZipItem Include="Templates\ProjectItems\JavascriptFile\JsIcon.ico" />
    <Content Include="Templates\Projects\ConsoleApp\NaClMain.c">
      <CopyToOutputDirectory>Always</CopyToOutputDirectory>
    </Content>
    <None Include="Templates\Projects\ConsoleApp\NaClNexe.vstemplate" />
    <Content Include="Templates\Projects\ConsoleApp\NaClProject.ico">
    </Content>
    <Content Include="Templates\Projects\WebApp\stub.nmf">
      <CopyToOutputDirectory>Always</CopyToOutputDirectory>
    </Content>
    <Content Include="Templates\Projects\WebApp\WebApp.cc">
      <CopyToOutputDirectory>Always</CopyToOutputDirectory>
    </Content>
    <Content Include="Templates\Projects\WebApp\WebApp.vstemplate">
    </Content>
    <Content Include="Templates\Projects\WebApp\NaClProject.ico">
    </Content>
    <Content Include="Templates\Projects\WebApp\stub.html">
      <CopyToOutputDirectory>Always</CopyToOutputDirectory>
    </Content>
  </ItemGroup>
  <ItemGroup>
    <None Include="Templates\Projects\ConsoleApp\NaClNexe.naclproj">
    </None>
    <None Include="Templates\Projects\WebApp\WebApp.naclproj">
    </None>
  </ItemGroup>
  <ItemGroup>
    <ProjectReference Include="..\..\third_party\Microsoft.VisualStudio.Project\Microsoft.VisualStudio.Project.csproj">
      <Project>{3421A4E4-0282-44A1-94D5-2868D04ED391}</Project>
      <Name>Microsoft.VisualStudio.Project</Name>
    </ProjectReference>
    <ProjectReference Include="..\MsAd7.BaseImpl\MsAd7.BaseImpl.csproj">
      <Project>{97E92446-E5EF-457A-B3CB-E9EB6CC41D62}</Project>
      <Name>MsAd7.BaseImpl</Name>
    </ProjectReference>
    <ProjectReference Include="..\NaClVsx.DebugHelpers\NaClVsx.DebugHelpers.vcproj">
      <Project>{6C53643B-14F7-40F9-9511-CE33F447F475}</Project>
      <Name>NaClVsx.DebugHelpers</Name>
    </ProjectReference>
  </ItemGroup>
  <PropertyGroup>
    <!--
    To specify a different registry root to register your package, uncomment the TargetRegistryRoot
    tag and specify a registry root in it.
    <TargetRegistryRoot></TargetRegistryRoot>
    -->
    <RegisterOutputPackage>true</RegisterOutputPackage>
    <RegisterWithCodebase>true</RegisterWithCodebase>
  </PropertyGroup>
  <Import Project="$(MSBuildBinPath)\Microsoft.CSharp.targets" />
  <Import Project="$(MSBuildExtensionsPath)\Microsoft\VisualStudio\v9.0\VSSDK\Microsoft.VsSDK.targets" />
  <!-- To modify your build process, add your task inside one of the targets below and uncomment it. 
       Other similar extension points exist, see Microsoft.Common.targets.
  <Target Name="BeforeBuild">
  </Target>
  <Target Name="AfterBuild">
  </Target>
  -->
  <PropertyGroup>
    <PostBuildEvent>"%25VSSDK90Install%25VisualStudioIntegration\Tools\bin\RegPkg.exe" /root:Software\Microsoft\VisualStudio\[VSREGROOT]  /regfile:"$(TargetDir)$(TargetName).reg" /codebase "$(TargetPath)"
cd $(TargetDir)
<!-- TODO(mlinck) this hook PostBuildEvent hook doesn't actually work because
     on the bots, the .dll files don't actually get written until after VS
     tries to run regpkg, so regpkg fails to generate the registry info file.
     This is a step that precedes installer generation.  It will need to be
     addressed when we're ready to write an installer that can be generated by
     the bots. --><!--python $(ProjectDir)fixreg.py $(TargetDir) $(TargetDir)$(TargetName).reg "$(TargetDir)$(TargetName).fixed.reg" [TARGETDIR] --></PostBuildEvent>
  </PropertyGroup>
</Project>