<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
          "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<!--
Copyright (c) 2010 The Native Client Authors. All rights reserved.
Use of this source code is governed by a BSD-style license that can be
found in the LICENSE file.
-->
<head>
  <title>Sine Wave Synthesizer</title>
  <script type="text/javascript">
    sineSynth = null;  // Global application object.

    function moduleDidLoad() {
      sineSynth = document.getElementById('sineSynth');
      document.getElementById('frequency_field').value = 440;
    }

    function toggleSound(flag) {
      try {
        sineSynth.frequency =
            document.getElementById('frequency_field').value;
        document.getElementById('frequency_field').value =
            sineSynth.frequency;
        if (flag) {
          sineSynth.playSound();
        } else {
          sineSynth.stopSound();
        }
      } catch(e) {
        alert(e.message);
      }
    }

    function changeFrequency(freq) {
      try {
        sineSynth.frequency = freq;
        document.getElementById('frequency_field').value =
            sineSynth.frequency;
      } catch(e) {
        alert(e.message);
      }
    }
  </script>
</head>

<body id="bodyId" onunload="pageDidUnload()">
  <h1>Sine Wave Synthesizer</h1>
  <p>Click the button to start and stop the sine wave playing.</p>
  <button onclick="toggleSound(true)">Play</button>
  <button onclick="toggleSound(false)">Stop</button>
  <p>Enter the frequency of the sine wave:</p>
  <input type="text" size="15" id="frequency_field"
         value="#undef" onchange="changeFrequency(this.value)" />
  <!-- Load the published .nexe.  This includes the 'nacl' attribute which
  shows how to load multi-architecture modules.  Each entry in the "nexes"
  object in the  .nmf manifest file is a key-value pair: the key is the runtime
  ('x86-32', 'x86-64', etc.); the value is a URL for the desired NaCl module.
  To load the debug versions of your .nexes, set the 'nacl' attribute to the
  _dbg.nmf version of the manifest file.
  -->
  <embed name="nacl_module"
         id="sineSynth"
         width=0 height=0
         nacl="sine_synth.nmf"
         type="application/x-nacl"
         onload="moduleDidLoad();" />
</body>
</html>
