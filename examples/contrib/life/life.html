<html>
<head>
<TITLE>Life Demo</TITLE>
<META HTTP-EQUIV="Pragma" CONTENT="no-cache">
<META HTTP-EQUIV="Expires" CONTENT="-1">

<script type="text/javascript">
  // Set the global status message.  If the element with id 'status_field'
  // exists, then set its HTML to the status message as well.
  // opt_message The message test.  If this is null or undefined, then
  //     attempt to set the element with id 'status_field' to the value of
  //     |status_text|.
  var life = null;
  var updateInterval = null;
  function updateStatus(opt_message) {
    if (opt_message)
      status_text = opt_message;
    var status_field = document.getElementById('status_field');
    if (status_field) {
      status_field.innerHTML = status_text;
    }
  }

  function moduleDidLoad() {
    life = document.getElementById('life');
    if (life != null) {
      updateStatus('SUCCESS');
      updateInterval = setInterval("life.update()", 300);
    }
  }

  function pageDidUnload() {
    clearInterval(updateInterval);
  }

</script>

</head>
<body id="bodyId" onunload="pageDidUnload();" >

<h1>Conway's Life</h1>
 <p>
  Use the mouse to paint extra life into the simulation.
 </p>

  <div id="life_content"></div>
  <script type="text/javascript">
    contentDiv = document.getElementById('life_content');
    if (window.location.hash == '#develop') {
       // Load the develop version of the module.
       contentDiv.innerHTML = '<embed name="nacl_module" '
                              + 'id="life" '
                              + 'width=200 height=200 '
                              + 'type="pepper-application/life" '
                              + 'dimension="2" />'
      moduleDidLoad();
    } else {
      // Load the published .nexe.
      contentDiv.innerHTML = '<embed name="nacl_module" '
                             + 'id="life" '
                             + 'width=200 height=200 '
                             + 'src="life.nexe" '
                             + 'type="application/x-nacl-srpc" '
                             + 'dimensions="2" '
                             + 'onload=moduleDidLoad() />';
    }
  </script>
<br>
</body>
</html>
